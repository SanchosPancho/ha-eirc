Интеграция личного кабинета единого информационно-расчетного центра Санкт-Петербурга с Home Assistant
==================================================

> Предоставление информации о текущем состоянии лицевых счетов и связанных с ними счетчиков в Home Assistant
>
> Протестированы одно и двухтарифные счетчики электроэнергии, ТКО, счетчики горячей и холодной воды.

## Установка и настройка

1. В HACS добавить [пользовательский репозиторий](https://hacs.xyz/docs/faq/custom_repositories/)
2. Пройти процедуру аутентификации используя учетные данные [личного кабинета ЕИРЦ](https://ikus.pesc.ru/): телефон в формате +78001234567 и пароль
3. Выберите необходимые учетные записи. Вложенные в них счетчики будут добавлены автоматически


## Отправка показаний

Необходимые данные:

- `entity_id` entity ID сенсора счетчика
- `scale_id` правильный ID тарифа можно найти в атрибутах сенсора счетчика
- `value` показания счетчика, которые надо передать

Для однотарифных счетчиков и счетчиков воды надо указать entity ID сенсора счетчика:

```yaml
action: eirc.send_meter_reading
data:
  entity_id: sensor.eirc_meter_123
  readings:
    - scale_id: 456
      value: 789
```

Для двухтарифных счетчиков надо указать entity ID сенсора любого тарифа.
Можно передавать показания для каждого тарифа по отдельности:

```yaml
action: eirc.send_meter_reading
data:
  entity_id: sensor.eirc_meter_123_den
  readings:
    - scale_id: 2
      value: 789
```

или вместе:

```yaml
action: eirc.send_meter_reading
data:
  entity_id: sensor.eirc_meter_123_den
  readings:
    - scale_id: 2 # Дневные показания
      value: 789
    - scale_id: 3 # Ночные показания
      value: 789
```

## Отдалдка

```yaml
logger:
  default: info
  logs:
    custom_components.eirc: debug
```